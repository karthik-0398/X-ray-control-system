% This script initializes all the necessary parameters for the 
% X_Ray_Control_System.slx Simulink model based on the Jaisingh Thesis.

% 1. Define the cutoff frequency for the X-Ray tube's low-pass filter
tubefreq = 2; % [cite: 2267]
s = sprintf('The xtube cutoff frequency of %4.2f hertz has been loaded',tubefreq);
disp(s);
% --- DATA FOR THE 'X Ray Tube' Subsystem Lookup Table ---
% These variables are for the "Tube current mapping" block inside the subsystem.
fill_cur = [3.327:.03750:4.827]; % Filament Currents (Amps) [cite: 2270]
tubekv = [80:20:120]; % Tube Voltages (kV) [cite: 2271]
tube_curr = [ % Table of resulting tube currents (mA) [cite: 2274-2278]
  0 0 0; 1.24 1.52 1.79; 2.48 2.78 3.06; 3.71 4.03 4.34; 5.00 5.28 5.60;
  6.19 6.54 6.89; 7.43 7.79 8.16; 8.66 9.05 9.44; 9.90 10.54 11.28;
  12.04 12.80 13.57; 14.26 15.06 15.85; 16.48 17.32 18.14; 18.70 19.58 20.67;
  21.44 22.86 24.26; 24.91 26.33 27.85; 28.38 29.91 31.90; 32.45 34.56 36.65;
  37.06 39.25 41.72; 42.03 44.85 47.58; 47.67 50.73 54.07; 53.93 57.61 61.17;
  60.72 65.10 69.15; 68.45 73.29 78.07; 76.90 80.23 87.76; 86.15 92.25 98.41;
  96.25 103.13 110.00; 107.27 115.17 122.91; 119.34 128.07 136.92;
  132.41 142.40 152.34; 146.80 157.87 168.86; 162.22 174.65 187.00;
  179.09 192.82 206.76; 197.25 212.50 227.94; 216.76 233.82 250.65;
  237.94 256.77 275.52; 260.65 281.38 302.22; 285.17 308.15 330.80;
  311.48 336.54 361.74; 339.62 366.30 395.00; 369.60 400.00 431.34;
  401.82 433.97 468.69
];
disp('The preheats have been loaded');
plot(fill_cur,tube_curr);
title('X-Ray tube emission characteristics');
xlabel('filament current in Amps');
ylabel('tube current in mA');
figure;
% --- DATA FOR THE 'Filament Preheats' & 'Filament Preheats 1' Blocks ---
tube_curr_ref = [0:5:600]; % Tube current reference (mA) [cite: 2336]
tube_kV_ref = [80:5:165]; % Tube voltage reference (kV) [cite: 2338]
fil_curr = [ % This is the large preheat table from the appendix [cite: 2342-2380]
    6654 6650 6645 6643 6638 6636 6632 6628 6624 6622 6619 6616 6615 6611 6608 6605 6602 6599;
    6957 6952 6946 6942 6937 6933 6928 6923 6918 6915 6911 6907 6904 6900 6896 6892 6888 6884;
    7260 7254 7247 7241 7236 7230 7224 7218 7212 7208 7203 7198 7193 7189 7184 7179 7174 7169;
    7453 7446 7438 7432 7426 7419 7413 7406 7400 7394 7389 7383 7378 7372 7367 7361 7356 7350;
    7598 7590 7582 7575 7568 7561 7554 7547 7540 7534 7528 7522 7516 7510 7504 7498 7492 7486;
    7715 7707 7698 7691 7683 7676 7668 7661 7653 7647 7641 7634 7628 7621 7615 7608 7602 7596;
    7814 7805 7797 7789 7781 7773 7765 7757 7749 7743 7736 7729 7722 7715 7709 7702 7695 7688;
    7901 7891 7882 7874 7865 7857 7849 7841 7833 7826 7818 7811 7804 7797 7790 7783 7776 7769;
    7977 7968 7958 7949 7941 7932 7924 7915 7907 7899 7892 7884 7877 7870 7862 7855 7848 7840;
    8046 8036 8027 8018 8009 8000 7991 7982 7974 7966 7958 7950 7942 7935 7927 7920 7912 7905;
    8110 8099 8089 8080 8071 8061 8052 8043 8035 8026 8018 8010 8002 7995 7987 7979 7971 7963;
    8168 8157 8147 8137 8128 8118 8109 8100 8091 8082 8074 8066 8057 8049 8041 8033 8025 8017;
    8222 8211 8200 8190 8180 8171 8161 8152 8143 8134 8126 8117 8108 8100 8092 8084 8076 8067;
    8272 8261 8250 8240 8230 8220 8210 8201 8191 8182 8174 8165 8156 8148 8139 8131 8123 8114;
    8319 8308 8297 8287 8276 8266 8256 8246 8237 8228 8219 8210 8201 8192 8184 8175 8167 8158;
    8364 8352 8341 8331 8320 8310 8300 8290 8280 8271 8261 8252 8243 8234 8226 8217 8208 8199;
    8406 8394 8383 8372 8361 8351 8341 8330 8320 8311 8302 8292 8283 8274 8265 8256 8247 8238;
    8446 8434 8423 8412 8401 8390 8380 8369 8359 8350 8340 8331 8321 8312 8303 8294 8285 8276;
    8484 8472 8461 8449 8438 8428 8417 8406 8396 8386 8377 8367 8357 8348 8339 8330 8320 8311;
    8521 8509 8497 8485 8474 8463 8452 8442 8431 8421 8412 8402 8392 8382 8373 8364 8354 8345;
    8556 8544 8531 8520 8509 8497 8486 8475 8465 8455 8445 8435 8425 8415 8406 8396 8387 8377;
    8590 8577 8565 8553 8541 8530 8519 8508 8497 8487 8477 8467 8457 8447 8437 8428 8418 8409;
    8622 8609 8597 8585 8573 8562 8551 8539 8529 8518 8508 8498 8487 8478 8468 8458 8448 8438;
    8653 8640 8628 8616 8604 8592 8581 8569 8559 8548 8538 8527 8517 8507 8497 8487 8477 8467;
    8683 8670 8658 8645 8633 8622 8610 8599 8588 8577 8566 8556 8545 8535 8525 8515 8505 8495;
    8712 8699 8686 8674 8662 8650 8638 8627 8616 8605 8594 8583 8573 8563 8552 8542 8532 8522;
    8741 8727 8714 8702 8690 8678 8666 8654 8643 8632 8621 8610 8599 8589 8579 8569 8558 8548;
    8768 8754 8741 8729 8716 8704 8692 8680 8669 8658 8647 8636 8625 8615 8604 8594 8584 8573;
    8795 8781 8768 8755 8742 8730 8718 8706 8695 8683 8672 8661 8650 8640 8629 8619 8608 8598;
    8820 8806 8793 8780 8768 8755 8743 8731 8719 8708 8697 8686 8674 8664 8653 8643 8632 8622;
    8845 8831 8818 8805 8792 8780 8767 8755 8743 8732 8721 8709 8698 8687 8677 8666 8655 8645;
    8870 8856 8842 8829 8816 8804 8791 8779 8767 8755 8744 8733 8721 8710 8700 8689 8678 8667;
    8894 8879 8866 8853 8839 8827 8814 8802 8790 8778 8767 8755 8744 8733 8722 8711 8700 8689;
    8917 8902 8889 8875 8862 8849 8837 8824 8812 8800 8789 8777 8765 8754 8743 8733 8722 8711;
    8939 8925 8911 8898 8884 8871 8859 8846 8834 8822 8810 8799 8787 8776 8765 8754 8742 8731;
    8962 8947 8933 8919 8906 8893 8880 8867 8855 8843 8831 8819 8808 8796 8785 8774 8763 8752;
    8983 8968 8954 8941 8927 8914 8901 8888 8876 8864 8852 8840 8828 8817 8805 8794 8783 8772;
    9004 8989 8975 8962 8948 8935 8922 8908 8896 8884 8872 8860 8848 8836 8825 8814 8803 8791;
    9025 9010 8996 8982 8968 8955 8942 8928 8916 8904 8892 8879 8867 8856 8844 8833 8822 8810;
    9045 9030 9016 9002 8988 8975 8961 8948 8935 8923 8911 8899 8886 8875 8863 8852 8840 8829;
    9065 9050 9036 9021 9007 8994 8980 8967 8954 8942 8930 8917 8905 8893 8882 8870 8859 8847;
    9085 9069 9055 9041 9026 9013 8999 8986 8973 8961 8948 8936 8923 8912 8900 8888 8877 8865;
    9104 9088 9074 9059 9045 9031 9018 9004 8991 8979 8966 8954 8941 8930 8918 8906 8894 8883;
    9122 9107 9092 9078 9063 9050 9036 9022 9009 8997 8984 8972 8959 8947 8935 8923 8912 8900;
    9141 9125 9110 9096 9081 9067 9054 9040 9027 9014 9002 8989 8976 8964 8952 8940 8929 8917;
    9159 9143 9128 9114 9099 9085 9071 9057 9044 9032 9019 9006 8993 8981 8969 8957 8945 8933;
    9176 9161 9146 9131 9116 9102 9088 9074 9061 9048 9036 9023 9010 8998 8986 8974 8962 8949;
    9194 9178 9163 9148 9133 9119 9105 9091 9078 9065 9052 9039 9026 9014 9002 8990 8978 8965;
    9211 9195 9180 9165 9150 9136 9122 9108 9095 9081 9068 9055 9042 9030 9018 9006 8993 8981;
    9228 9212 9197 9182 9166 9152 9138 9124 9111 9098 9084 9071 9058 9046 9034 9021 9009 8997;
    9244 9228 9213 9198 9183 9168 9154 9140 9127 9113 9100 9087 9074 9061 9049 9037 9024 9012;
    9261 9244 9229 9214 9199 9184 9170 9156 9142 9129 9116 9102 9089 9077 9064 9052 9039 9027;
    9277 9260 9245 9230 9214 9200 9186 9171 9158 9144 9131 9117 9104 9092 9079 9067 9054 9042;
    9293 9276 9261 9245 9230 9215 9201 9186 9173 9159 9146 9132 9119 9106 9094 9081 9069 9056;
    9308 9292 9276 9261 9245 9230 9216 9201 9188 9174 9161 9147 9134 9121 9108 9096 9083 9070;
    9323 9307 9291 9276 9260 9245 9231 9216 9202 9189 9175 9162 9148 9135 9123 9110 9097 9085;
    9339 9322 9306 9291 9275 9260 9245 9231 9217 9203 9190 9176 9162 9149 9137 9124 9111 9098;
    9353 9337 9321 9305 9289 9275 9260 9245 9231 9217 9204 9190 9176 9163 9151 9138 9125 9112;
    9368 9351 9335 9320 9304 9289 9274 9259 9245 9232 9218 9204 9190 9177 9164 9151 9138 9126;
    9383 9366 9350 9334 9318 9303 9288 9273 9259 9245 9231 9217 9204 9191 9178 9165 9152 9139;
    9397 9380 9364 9348 9332 9317 9302 9287 9273 9259 9245 9231 9217 9204 9191 9178 9165 9152;
    9411 9394 9378 9362 9346 9331 9316 9301 9287 9272 9258 9244 9230 9217 9204 9191 9178 9165;
    9425 9408 9492 9376 9359 9344 9329 9314 9300 9286 9272 9257 9243 9230 9217 9204 9191 9178;
    9439 9422 9405 9389 9373 9358 9342 9327 9313 9299 9285 9270 9256 9243 9230 9217 9204 9190;
    9452 9435 9419 9403 9386 9371 9356 9340 9326 9312 9298 9283 9269 9256 9243 9229 9216 9203;
    9466 9448 9432 9416 9399 9384 9369 9353 9339 9325 9310 9296 9282 9268 9255 9242 9228 9215;
    9479 9462 9445 9429 9412 9397 9381 9366 9352 9337 9323 9308 9294 9281 9267 9254 9241 9227;
    9492 9475 9458 9442 9425 9410 9394 9379 9364 9350 9335 9321 9306 9293 9280 9266 9253 9239;
    9505 9488 9471 9454 9438 9422 9407 9391 9377 9362 9348 9333 9319 9305 9292 9278 9265 9251;
    9518 9500 9484 9467 9450 9435 9419 9403 9389 9374 9360 9345 9331 9317 9303 9290 9276 9263;
    9531 9513 9496 9479 9463 9447 9431 9416 9401 9386 9372 9357 9342 9329 9315 9302 9288 9274;
    9543 9525 9509 9492 9475 9459 9443 9428 9413 9398 9384 9369 9354 9340 9327 9313 9300 9286;
    9555 9538 9521 9504 9487 9471 9455 9440 9425 9410 9395 9381 9366 9352 9338 9325 9311 9297;
    9568 9550 9533 9516 9499 9483 9467 9451 9437 9422 9407 9392 9377 9363 9350 9336 9322 9308;
    9580 9562 9545 9528 9511 9495 9479 9463 9448 9433 9418 9403 9389 9375 9361 9347 9333 9320;
    9592 9574 9557 9540 9523 9507 9491 9475 9460 9445 9430 9415 9400 9386 9372 9358 9344 9330;
    9604 9585 9568 9551 9534 9518 9502 9486 9471 9456 9441 9426 9411 9397 9383 9369 9355 9341;
    9615 9597 9580 9563 9546 9529 9513 9497 9482 9467 9452 9437 9422 9408 9394 9380 9366 9352;
    9627 9609 9592 9574 9557 9541 9525 9508 9493 9478 9463 9448 9433 9419 9405 9391 9377 9363;
    9638 9620 9603 9586 9568 9552 9536 9519 9504 9489 9474 9459 9444 9429 9415 9401 9387 9373;
    9650 9631 9614 9597 9579 9563 9547 9530 9515 9500 9485 9469 9454 9440 9426 9412 9398 9384;
    9661 9642 9625 9608 9590 9574 9558 9541 9526 9511 9496 9480 9465 9451 9437 9423 9409 9395;
    9673 9654 9637 9620 9602 9586 9570 9552 9537 9522 9507 9491 9476 9462 9448 9434 9420 9406;
    9685 9666 9649 9632 9613 9597 9581 9564 9549 9534 9518 9502 9487 9473 9459 9445 9431 9417;
    9697 9678 9661 9644 9625 9609 9593 9575 9560 9545 9530 9513 9498 9484 9470 9456 9442 9428;
    9709 9690 9673 9656 9637 9621 9605 9587 9572 9557 9541 9525 9510 9495 9481 9467 9453 9439;
    9721 9701 9684 9667 9648 9632 9616 9598 9583 9568 9552 9536 9521 9506 9492 9478 9464 9450;
    9733 9713 9696 9679 9660 9644 9628 9609 9594 9579 9564 9547 9532 9517 9503 9489 9475 9461;
    9745 9725 9708 9691 9671 9655 9639 9621 9606 9591 9575 9558 9543 9528 9514 9500 9486 9472;
    9757 9737 9720 9703 9683 9667 9651 9632 9603 9602 9586 9569 9554 9539 9525 9511 9497 9483;
    9769 9749 9732 9715 9695 9679 9663 9644 9629 9614 9598 9581 9566 9551 9537 9522 9508 9494;
    9780 9760 9743 9726 9706 9690 9674 9655 9640 9625 9609 9592 9577 9562 9548 9533 9519 9505;
    9792 9772 9755 9738 9718 9702 9686 9666 9651 9636 9620 9603 9588 9573 9559 9544 9530 9516;
    9804 9784 9767 9750 9729 9713 9697 9678 9663 9648 9631 9614 9599 9584 9570 9555 9541 9527;
    9816 9796 9779 9762 9741 9725 9709 9689 9674 9659 9643 9625 9610 9595 9581 9566 9552 9538;
    9828 9808 9791 9774 9753 9737 9721 9701 9686 9671 9654 9637 9622 9606 9592 9577 9563 9549;
    9840 9819 9802 9785 9764 9748 9732 9712 9697 9682 9665 9648 9633 9617 9603 9588 9574 9560;
    9852 9831 9814 9797 9776 9760 9744 9723 9708 9693 9677 9659 9644 9628 9614 9599 9585 9571;
    9864 9843 9826 9809 9787 9771 9755 9735 9720 9705 9688 9670 9655 9639 9625 9610 9596 9582;
    9876 9855 9838 9821 9799 9783 9767 9746 9731 9716 9699 9681 9666 9650 9636 9621 9607 9593;
    9888 9867 9850 9833 9811 9795 9779 9758 9743 9728 9711 9693 9678 9662 9648 9632 9618 9604;
    9899 9878 9861 9844 9822 9806 9790 9769 9754 9739 9722 9704 9689 9673 9659 9643 9629 9615;
    9911 9890 9873 9856 9834 9818 9802 9780 9765 9750 9733 9715 9700 9684 9670 9654 9640 9626;
    9923 9902 9885 9868 9845 9829 9813 9792 9777 9762 9744 9726 9711 9695 9681 9665 9651 9637;
    9935 9914 9897 9880 9857 9841 9825 9803 9788 9773 9756 9737 9722 9706 9692 9676 9662 9648;
    9947 9926 9909 9892 9869 9853 9837 9815 9800 9785 9767 9749 9734 9717 9703 9687 9673 9659;
    9959 9937 9920 9903 9880 9864 9848 9826 9811 9796 9778 9760 9745 9728 9714 9698 9684 9670;
    9971 9949 9932 9915 9892 9876 9860 9837 9822 9807 9790 9771 9756 9739 9725 9709 9695 9681;
    9983 9961 9944 9927 9903 9887 9871 9849 9834 9819 9801 9782 9767 9750 9736 9720 9706 9692;
    9995 9973 9956 9939 9915 9899 9883 9860 9845 9830 9812 9793 9778 9761 9747 9731 9717 9703;
    10007 9985 9968 9951 9927 9911 9895 9872 9857 9842 9824 9805 9790 9773 9759 9742 9728 9714;
    10018 9996 9979 9962 9938 9922 9906 9883 9868 9853 9835 9816 9801 9784 9770 9753 9739 9725;
    10030 10008 9991 9974 9950 9934 9918 9894 9879 9864 9846 9827 9812 9795 9781 9764 9750 9736;
    10042 10020 10003 9986 9961 9945 9929 9906 9891 9876 9857 9838 9823 9806 9792 9775 9761 9747;
    10054 10032 10015 9998 9973 9957 9941 9917 9902 9887 9869 9849 9834 9817 9803 9786 9772 9758;
    10066 10044 10027 10010 9985 9969 9953 9929 9914 9899 9880 9861 9846 9828 9814 9797 9783 9769;
    10078 10055 10038 10021 9996 9980 9964 9940 9925 9910 9891 9872 9857 9839 9825 9808 9794 9780;
    10090 10067 10050 10033 10008 9992 9976 9951 9936 9921 9903 9883 9868 9850 9836 9819 9805 9791;
    10102 10079 10062 10045 10019 10003 9987 9963 9948 9933 9914 9894 9879 9861 9847 9830 9816 9802;
    10114 10091 10074 10057 10031 10015 9999 9974 9959 9944 9925 9905 9890 9872 9858 9841 9827 9813;
    10126 10103 10086 10069 10043 10027 10011 9986 9971 9956 9937 9917 9902 9884 9870 9852 9838 9824;
];

disp('All X-Ray control system parameters have been loaded into the workspace.');
%/*{9650 9631 9614 9597 9579 9563 9547 9530 9515 9500 9485 9469 9454 9440 9426 9412 9398 9384} MDH this the real 400ma data -see above */
fili1=fil_curr*0.0005;
disp('filament preheat table loaded');
plot(fili1,tube_curr_ref);
title('filament preheats');
xlabel('filament current in Amps');
ylabel('tube current in mA');